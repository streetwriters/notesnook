(()=>{var e={804:function(e){var t=/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,n=/and|article|body|column|content|main|shadow/i;function i(e){return(!e.style||"none"!=e.style.display)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))}e.exports=function(e,r={}){"function"==typeof r&&(r={visibilityChecker:r}),r=Object.assign({minScore:20,minContentLength:140,visibilityChecker:i},r);var o=e.querySelectorAll("p, pre, article"),a=e.querySelectorAll("div > br");if(a.length){var s=new Set(o);[].forEach.call(a,function(e){s.add(e.parentNode)}),o=Array.from(s)}var l=0;return[].some.call(o,function(e){if(!r.visibilityChecker(e))return!1;var i=e.className+" "+e.id;if(t.test(i)&&!n.test(i)||e.matches("li p"))return!1;var o=e.textContent.trim().length;return!(o<r.minContentLength)&&(l+=Math.sqrt(o-r.minContentLength))>r.minScore})}},238:function(e){function t(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(e){if(e.nodeType==e.TEXT_NODE)return`${e.nodeName} ("${e.textContent}")`;let t=Array.from(e.attributes||[],function(e){return`${e.name}="${e.value}"`}).join(" ");return`<${e.localName} ${t}>`};this.log=function(){if("undefined"!=typeof dump){var t=Array.prototype.map.call(arguments,function(t){return t&&t.nodeName?e(t):t}).join(" ");dump("Reader: (Readability) "+t+"\n")}else if("undefined"!=typeof console){let t=Array.from(arguments,t=>t&&t.nodeType==this.ELEMENT_NODE?e(t):t);t.unshift("Reader: (Readability)"),console.log.apply(console,t)}}}else this.log=function(){}}t.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"SECTION,H2,H3,H4,H5,H6,P,TD,PRE".split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw Error("Do not pass live node lists to _removeNodes");for(var n=e.length-1;n>=0;n--){var i=e[n],r=i.parentNode;r&&(!t||t.call(this,i,n,e))&&r.removeChild(i)}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw Error("Do not pass live node lists to _replaceNodeTags");for(let n of e)this._setNodeTag(n,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments),n=t.map(function(t){return e.call(t)});return Array.prototype.concat.apply([],n)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(t){var n=e.getElementsByTagName(t);return Array.isArray(n)?n:Array.from(n)}))},_cleanClasses:function(e){var t=this._classesToPreserve,n=(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return -1!=t.indexOf(e)}).join(" ");for(n?e.setAttribute("class",n):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,n=this._doc.documentURI;function i(e){if(t==n&&"#"==e.charAt(0))return e;try{return new URL(e,t).href}catch(e){}return e}var r=this._getAllNodesWithTag(e,["a"]);this._forEachNode(r,function(e){var t=e.getAttribute("href");if(t)if(0===t.indexOf("javascript:"))if(1===e.childNodes.length&&e.childNodes[0].nodeType===this.TEXT_NODE){var n=this._doc.createTextNode(e.textContent);e.parentNode.replaceChild(n,e)}else{for(var r=this._doc.createElement("span");e.firstChild;)r.appendChild(e.firstChild);e.parentNode.replaceChild(r,e)}else e.setAttribute("href",i(t))});var o=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(o,function(e){var t=e.getAttribute("src"),n=e.getAttribute("poster"),r=e.getAttribute("srcset");if(t&&e.setAttribute("src",i(t)),n&&e.setAttribute("poster",i(n)),r){var o=r.replace(this.REGEXPS.srcsetUrl,function(e,t,n,r){return i(t)+(n||"")+r});e.setAttribute("srcset",o)}})},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var n=t.children[0],i=0;i<t.attributes.length;i++)n.setAttribute(t.attributes[i].name,t.attributes[i].value);t.parentNode.replaceChild(n,t),t=n;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",n="";try{t=n=e.title.trim(),"string"!=typeof t&&(t=n=this._getInnerText(e.getElementsByTagName("title")[0]))}catch(e){}var i=!1;function r(e){return e.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))i=/ [\\\/>»] /.test(t),3>r(t=n.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"))&&(t=n.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(-1!==t.indexOf(": ")){var o=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),a=t.trim();!this._someNode(o,function(e){return e.textContent.trim()===a})&&(3>r(t=n.substring(n.lastIndexOf(":")+1))?t=n.substring(n.indexOf(":")+1):r(n.substr(0,n.indexOf(":")))>5&&(t=n))}else if(t.length>150||t.length<15){var s=e.getElementsByTagName("h1");1===s.length&&(t=this._getInnerText(s[0]))}var l=r(t=t.trim().replace(this.REGEXPS.normalize," "));return l<=4&&(!i||l!=r(n.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=n),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(e){for(var t=e.nextSibling,n=!1;(t=this._nextNode(t))&&"BR"==t.tagName;){n=!0;var i=t.nextSibling;t.parentNode.removeChild(t),t=i}if(n){var r=this._doc.createElement("p");for(e.parentNode.replaceChild(r,e),t=r.nextSibling;t;){if("BR"==t.tagName){var o=this._nextNode(t.nextSibling);if(o&&"BR"==o.tagName)break}if(!this._isPhrasingContent(t))break;var a=t.nextSibling;r.appendChild(t),t=a}for(;r.lastChild&&this._isWhitespace(r.lastChild);)r.removeChild(r.lastChild);"P"===r.parentNode.tagName&&this._setNodeTag(r.parentNode,"DIV")}})},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var n=e.ownerDocument.createElement(t);e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e),e.readability&&(n.readability=e.readability);for(var i=0;i<e.attributes.length;i++)try{n.setAttribute(e.attributes[i].name,e.attributes[i].value)}catch(e){}return n},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,function(e){this._cleanMatchedNodes(e,function(e,n){return this.REGEXPS.shareElements.test(n)&&e.textContent.length<t})}),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),function(e){return 0===e.getElementsByTagName("img").length+e.getElementsByTagName("embed").length+e.getElementsByTagName("object").length+e.getElementsByTagName("iframe").length&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(e){var t=this._nextNode(e.nextSibling);t&&"P"==t.tagName&&e.parentNode.removeChild(e)}),this._forEachNode(this._getAllNodesWithTag(e,["table"]),function(e){var t=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(t,"TR")){var n=t.firstElementChild;if(this._hasSingleTagInsideElement(n,"TD")){var i=n.firstElementChild;i=this._setNodeTag(i,this._everyNode(i.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(i,e)}}})},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do e=e.parentNode;while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var n=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),i=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);return n.length&&i.length?1-i.filter(e=>!n.includes(e)).join(" ").length/i.join(" ").length:0},_checkByline:function(e,t){if(this._articleByline)return!1;if(void 0!==e.getAttribute)var n=e.getAttribute("rel"),i=e.getAttribute("itemprop");return!!(("author"===n||i&&-1!==i.indexOf("author")||this.REGEXPS.byline.test(t))&&this._isValidByline(e.textContent))&&(this._articleByline=e.textContent.trim(),!0)},_getNodeAncestors:function(e,t){t=t||0;for(var n=0,i=[];e.parentNode&&(i.push(e.parentNode),!t||++n!==t);)e=e.parentNode;return i},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,n=null!==e;if(!(e=e||this._doc.body))return this.log("No body found in document. Abort."),null;for(var i=e.innerHTML;;){this.log("Starting grabArticle loop");var r,o=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],s=this._doc.documentElement;let F=!0;for(;s;){"HTML"===s.tagName&&(this._articleLang=s.getAttribute("lang"));var l=s.className+" "+s.id;if(!this._isProbablyVisible(s)){this.log("Removing hidden node - "+l),s=this._removeAndGetNext(s);continue}if(this._checkByline(s,l)){s=this._removeAndGetNext(s);continue}if(F&&this._headerDuplicatesTitle(s)){this.log("Removing header: ",s.textContent.trim(),this._articleTitle.trim()),F=!1,s=this._removeAndGetNext(s);continue}if(o){if(this.REGEXPS.unlikelyCandidates.test(l)&&!this.REGEXPS.okMaybeItsACandidate.test(l)&&!this._hasAncestorTag(s,"table")&&!this._hasAncestorTag(s,"code")&&"BODY"!==s.tagName&&"A"!==s.tagName){this.log("Removing unlikely candidate - "+l),s=this._removeAndGetNext(s);continue}if(this.UNLIKELY_ROLES.includes(s.getAttribute("role"))){this.log("Removing content with role "+s.getAttribute("role")+" - "+l),s=this._removeAndGetNext(s);continue}}if(("DIV"===s.tagName||"SECTION"===s.tagName||"HEADER"===s.tagName||"H1"===s.tagName||"H2"===s.tagName||"H3"===s.tagName||"H4"===s.tagName||"H5"===s.tagName||"H6"===s.tagName)&&this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}if(-1!==this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)&&a.push(s),"DIV"===s.tagName){for(var c=null,u=s.firstChild;u;){var h=u.nextSibling;if(this._isPhrasingContent(u))null!==c?c.appendChild(u):this._isWhitespace(u)||(c=t.createElement("p"),s.replaceChild(c,u),c.appendChild(u));else if(null!==c){for(;c.lastChild&&this._isWhitespace(c.lastChild);)c.removeChild(c.lastChild);c=null}u=h}if(this._hasSingleTagInsideElement(s,"P")&&.25>this._getLinkDensity(s)){var d=s.children[0];s.parentNode.replaceChild(d,s),s=d,a.push(s)}else this._hasChildBlockElement(s)||(s=this._setNodeTag(s,"P"),a.push(s))}s=this._getNextNode(s)}var f=[];this._forEachNode(a,function(e){if(e.parentNode&&void 0!==e.parentNode.tagName){var t,n=this._getInnerText(e);if(!(n.length<25)){var i=this._getNodeAncestors(e,5);0!==i.length&&(t=1+n.split(",").length+Math.min(Math.floor(n.length/100),3),this._forEachNode(i,function(e,n){if(e.tagName&&e.parentNode&&void 0!==e.parentNode.tagName){if(void 0===e.readability&&(this._initializeNode(e),f.push(e)),0===n)var i=1;else i=1===n?2:3*n;e.readability.contentScore+=t/i}}))}}});for(var g=[],m=0,p=f.length;m<p;m+=1){var y=f[m],v=y.readability.contentScore*(1-this._getLinkDensity(y));y.readability.contentScore=v,this.log("Candidate:",y,"with score "+v);for(var _=0;_<this._nbTopCandidates;_++){var b=g[_];if(!b||v>b.readability.contentScore){g.splice(_,0,y),g.length>this._nbTopCandidates&&g.pop();break}}}var E=g[0]||null,N=!1;if(null===E||"BODY"===E.tagName){for(E=t.createElement("DIV"),N=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),E.appendChild(e.firstChild);e.appendChild(E),this._initializeNode(E)}else if(E){for(var A=[],T=1;T<g.length;T++)g[T].readability.contentScore/E.readability.contentScore>=.75&&A.push(this._getNodeAncestors(g[T]));if(A.length>=3)for(r=E.parentNode;"BODY"!==r.tagName;){for(var C=0,S=0;S<A.length&&C<3;S++)C+=Number(A[S].includes(r));if(C>=3){E=r;break}r=r.parentNode}E.readability||this._initializeNode(E),r=E.parentNode;for(var x=E.readability.contentScore,w=x/3;"BODY"!==r.tagName;){if(!r.readability){r=r.parentNode;continue}var L=r.readability.contentScore;if(L<w)break;if(L>x){E=r;break}x=r.readability.contentScore,r=r.parentNode}for(r=E.parentNode;"BODY"!=r.tagName&&1==r.children.length;)r=(E=r).parentNode;E.readability||this._initializeNode(E)}var P=t.createElement("DIV");n&&(P.id="readability-content");for(var O=Math.max(10,.2*E.readability.contentScore),I=(r=E.parentNode).children,R=0,D=I.length;R<D;R++){var M=I[R],k=!1;if(this.log("Looking at sibling node:",M,M.readability?"with score "+M.readability.contentScore:""),this.log("Sibling has score",M.readability?M.readability.contentScore:"Unknown"),M===E)k=!0;else{var B=0;if(M.className===E.className&&""!==E.className&&(B+=.2*E.readability.contentScore),M.readability&&M.readability.contentScore+B>=O)k=!0;else if("P"===M.nodeName){var H=this._getLinkDensity(M),j=this._getInnerText(M),$=j.length;$>80&&H<.25?k=!0:$<80&&$>0&&0===H&&-1!==j.search(/\.( |$)/)&&(k=!0)}}k&&(this.log("Appending node:",M),-1===this.ALTER_TO_DIV_EXCEPTIONS.indexOf(M.nodeName)&&(this.log("Altering sibling:",M,"to div."),M=this._setNodeTag(M,"DIV")),P.appendChild(M),I=r.children,R-=1,D-=1)}if(this._debug&&this.log("Article content pre-prep: "+P.innerHTML),this._prepArticle(P),this._debug&&this.log("Article content post-prep: "+P.innerHTML),N)E.id="readability-page-1",E.className="page";else{var U=t.createElement("DIV");for(U.id="readability-page-1",U.className="page";P.firstChild;)U.appendChild(P.firstChild);P.appendChild(U)}this._debug&&this.log("Article content after paging: "+P.innerHTML);var G=!0,V=this._getInnerText(P,!0).length;if(V<this._charThreshold)if(G=!1,e.innerHTML=i,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:P,textLength:V});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:P,textLength:V});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:P,textLength:V});else{if(this._attempts.push({articleContent:P,textLength:V}),this._attempts.sort(function(e,t){return t.textLength-e.textLength}),!this._attempts[0].textLength)return null;P=this._attempts[0].articleContent,G=!0}if(G){var W=[r,E].concat(this._getNodeAncestors(r));return this._someNode(W,function(e){if(!e.tagName)return!1;var t=e.getAttribute("dir");return!!t&&(this._articleDir=t,!0)}),P}}},_isValidByline:function(e){return("string"==typeof e||e instanceof String)&&(e=e.trim()).length>0&&e.length<100},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,function(e,n){return t[n]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(e,t,n){return String.fromCharCode(parseInt(t||n,t?16:10))})},_getJSONLD:function(e){var t,n=this._getAllNodesWithTag(e,["script"]);return this._forEachNode(n,function(e){if(!t&&"application/ld+json"===e.getAttribute("type"))try{var n=e.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),i=JSON.parse(n);if(!i["@context"]||!i["@context"].match(/^https?\:\/\/schema\.org$/)||(!i["@type"]&&Array.isArray(i["@graph"])&&(i=i["@graph"].find(function(e){return(e["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!i||!i["@type"]||!i["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(t={},"string"==typeof i.name&&"string"==typeof i.headline&&i.name!==i.headline){var r=this._getArticleTitle(),o=this._textSimilarity(i.name,r)>.75;this._textSimilarity(i.headline,r)>.75&&!o?t.title=i.headline:t.title=i.name}else"string"==typeof i.name?t.title=i.name.trim():"string"==typeof i.headline&&(t.title=i.headline.trim());i.author&&("string"==typeof i.author.name?t.byline=i.author.name.trim():Array.isArray(i.author)&&i.author[0]&&"string"==typeof i.author[0].name&&(t.byline=i.author.filter(function(e){return e&&"string"==typeof e.name}).map(function(e){return e.name.trim()}).join(", "))),"string"==typeof i.description&&(t.excerpt=i.description.trim()),i.publisher&&"string"==typeof i.publisher.name&&(t.siteName=i.publisher.name.trim());return}catch(e){this.log(e.message)}}),t||{}},_getArticleMetadata:function(e){var t={},n={},i=this._doc.getElementsByTagName("meta"),r=/\s*(dc|dcterm|og|twitter)\s*:\s*(author|creator|description|title|site_name)\s*/gi,o=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(i,function(e){var t=e.getAttribute("name"),i=e.getAttribute("property"),a=e.getAttribute("content");if(a){var s=null,l=null;i&&(s=i.match(r))&&(n[l=s[0].toLowerCase().replace(/\s/g,"")]=a.trim()),!s&&t&&o.test(t)&&(l=t,a&&(n[l=l.toLowerCase().replace(/\s/g,"").replace(/\./g,":")]=a.trim()))}}),t.title=e.title||n["dc:title"]||n["dcterm:title"]||n["og:title"]||n["weibo:article:title"]||n["weibo:webpage:title"]||n.title||n["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||n["dc:creator"]||n["dcterm:creator"]||n.author,t.excerpt=e.excerpt||n["dc:description"]||n["dcterm:description"]||n["og:description"]||n["weibo:article:description"]||n["weibo:webpage:description"]||n.description||n["twitter:description"],t.siteName=e.siteName||n["og:site_name"],t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t},_isSingleImage:function(e){return"IMG"===e.tagName||1===e.children.length&&""===e.textContent.trim()&&this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t];switch(n.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(n.value))return}e.parentNode.removeChild(e)});var n=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(n,function(t){var n=e.createElement("div");if(n.innerHTML=t.innerHTML,this._isSingleImage(n)){var i=t.previousElementSibling;if(i&&this._isSingleImage(i)){var r=i;"IMG"!==r.tagName&&(r=i.getElementsByTagName("img")[0]);for(var o=n.getElementsByTagName("img")[0],a=0;a<r.attributes.length;a++){var s=r.attributes[a];if(""!==s.value&&("src"===s.name||"srcset"===s.name||/\.(jpg|jpeg|png|webp)/i.test(s.value))){if(o.getAttribute(s.name)===s.value)continue;var l=s.name;o.hasAttribute(l)&&(l="data-old-"+l),o.setAttribute(l,s.value)}}t.parentNode.replaceChild(n.firstElementChild,i)}}})},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script"]),function(e){return e.nodeValue="",e.removeAttribute("src"),!0}),this._removeNodes(this._getAllNodesWithTag(e,["noscript"]))},_hasSingleTagInsideElement:function(e,t){return 1==e.children.length&&e.children[0].tagName===t&&!this._someNode(e.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&0==e.textContent.trim().length&&(0==e.children.length||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,function(e){return this.DIV_TO_P_ELEMS.has(e.tagName)||this._hasChildBlockElement(e)})},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||-1!==this.PHRASING_ELEMS.indexOf(e.tagName)||("A"===e.tagName||"DEL"===e.tagName||"INS"===e.tagName)&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&0===e.textContent.trim().length||e.nodeType===this.ELEMENT_NODE&&"BR"===e.tagName},_getInnerText:function(e,t){t=void 0===t||t;var n=e.textContent.trim();return t?n.replace(this.REGEXPS.normalize," "):n},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(e&&"svg"!==e.tagName.toLowerCase()){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);-1!==this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var n=e.firstElementChild;null!==n;)this._cleanStyles(n),n=n.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(0===t)return 0;var n=0;return this._forEachNode(e.getElementsByTagName("a"),function(e){var t=e.getAttribute("href"),i=t&&this.REGEXPS.hashUrl.test(t)?.3:1;n+=this._getInnerText(e).length*i}),n/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return"string"==typeof e.className&&""!==e.className&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),"string"==typeof e.id&&""!==e.id&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var n=-1!==["object","embed","iframe"].indexOf(t);this._removeNodes(this._getAllNodesWithTag(e,[t]),function(e){if(n){for(var t=0;t<e.attributes.length;t++)if(this.REGEXPS.videos.test(e.attributes[t].value))return!1;if("object"===e.tagName&&this.REGEXPS.videos.test(e.innerHTML))return!1}return!0})},_hasAncestorTag:function(e,t,n,i){n=n||3,t=t.toUpperCase();for(var r=0;e.parentNode&&(!(n>0)||!(r>n));){if(e.parentNode.tagName===t&&(!i||i(e.parentNode)))return!0;e=e.parentNode,r++}return!1},_getRowAndColumnCount:function(e){for(var t=0,n=0,i=e.getElementsByTagName("tr"),r=0;r<i.length;r++){var o=i[r].getAttribute("rowspan")||0;o&&(o=parseInt(o,10)),t+=o||1;for(var a=0,s=i[r].getElementsByTagName("td"),l=0;l<s.length;l++){var c=s[l].getAttribute("colspan")||0;c&&(c=parseInt(c,10)),a+=c||1}n=Math.max(n,a)}return{rows:t,columns:n}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),n=0;n<t.length;n++){var i=t[n];if("presentation"==i.getAttribute("role")||"0"==i.getAttribute("datatable")){i._readabilityDataTable=!1;continue}if(i.getAttribute("summary")){i._readabilityDataTable=!0;continue}var r=i.getElementsByTagName("caption")[0];if(r&&r.childNodes.length>0){i._readabilityDataTable=!0;continue}if(["col","colgroup","tfoot","thead","th"].some(function(e){return!!i.getElementsByTagName(e)[0]})){this.log("Data table because found data-y descendant"),i._readabilityDataTable=!0;continue}if(i.getElementsByTagName("table")[0]){i._readabilityDataTable=!1;continue}var o=this._getRowAndColumnCount(i);if(o.rows>=10||o.columns>4){i._readabilityDataTable=!0;continue}i._readabilityDataTable=o.rows*o.columns>10}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),function(e){if(e.src&&this.REGEXPS.b64DataUrl.test(e.src)){if("image/svg+xml"===this.REGEXPS.b64DataUrl.exec(e.src)[1])return;for(var t=!1,n=0;n<e.attributes.length;n++){var i=e.attributes[n];if("src"!==i.name&&/\.(jpg|jpeg|png|webp)/i.test(i.value)){t=!0;break}}if(t){var r=e.src.search(/base64\s*/i)+7;e.src.length-r<133&&e.removeAttribute("src")}}if(!e.src&&(!e.srcset||"null"==e.srcset)||-1!==e.className.toLowerCase().indexOf("lazy")){for(var o=0;o<e.attributes.length;o++)if("src"!==(i=e.attributes[o]).name&&"srcset"!==i.name&&"alt"!==i.name){var a=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(i.value)?a="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(i.value)&&(a="src"),a){if("IMG"===e.tagName||"PICTURE"===e.tagName)e.setAttribute(a,i.value);else if("FIGURE"===e.tagName&&!this._getAllNodesWithTag(e,["img","picture"]).length){var s=this._doc.createElement("img");s.setAttribute(a,i.value),e.appendChild(s)}}}}})},_getTextDensity:function(e,t){var n=this._getInnerText(e,!0).length;if(0===n)return 0;var i=0,r=this._getAllNodesWithTag(e,t);return this._forEachNode(r,e=>i+=this._getInnerText(e,!0).length),i/n},_cleanConditionally:function(e,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(e,[t]),function(e){var n=function(e){return e._readabilityDataTable},i="ul"===t||"ol"===t;if(!i){var r=0,o=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(o,e=>r+=this._getInnerText(e).length),i=r/this._getInnerText(e).length>.9}if("table"===t&&n(e)||this._hasAncestorTag(e,"table",-1,n)||this._hasAncestorTag(e,"code"))return!1;var a=this._getClassWeight(e);if(this.log("Cleaning Conditionally",e),a+0<0)return!0;if(10>this._getCharCount(e,",")){for(var s=e.getElementsByTagName("p").length,l=e.getElementsByTagName("img").length,c=e.getElementsByTagName("li").length-100,u=e.getElementsByTagName("input").length,h=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),d=0,f=this._getAllNodesWithTag(e,["object","embed","iframe"]),g=0;g<f.length;g++){for(var m=0;m<f[g].attributes.length;m++)if(this.REGEXPS.videos.test(f[g].attributes[m].value))return!1;if("object"===f[g].tagName&&this.REGEXPS.videos.test(f[g].innerHTML))return!1;d++}var p=this._getLinkDensity(e),y=this._getInnerText(e).length;return l>1&&s/l<.5&&!this._hasAncestorTag(e,"figure")||!i&&c>s||u>Math.floor(s/3)||!i&&h<.9&&y<25&&(0===l||l>2)&&!this._hasAncestorTag(e,"figure")||!i&&a<25&&p>.2||a>=25&&p>.5||1===d&&y<75||d>1}return!1})},_cleanMatchedNodes:function(e,t){for(var n=this._getNextNode(e,!0),i=this._getNextNode(e);i&&i!=n;)i=t.call(this,i,i.className+" "+i.id)?this._removeAndGetNext(i):this._getNextNode(i)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,function(e){let t=0>this._getClassWeight(e);return t&&this.log("Removing header with low class weight:",e),t})},_headerDuplicatesTitle:function(e){if("H1"!=e.tagName&&"H2"!=e.tagName)return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||"none"!=e.style.display)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var n=this._getArticleMetadata(t);this._articleTitle=n.title;var i=this._grabArticle();if(!i)return null;if(this.log("Grabbed: "+i.innerHTML),this._postProcessContent(i),!n.excerpt){var r=i.getElementsByTagName("p");r.length>0&&(n.excerpt=r[0].textContent.trim())}var o=i.textContent;return{title:this._articleTitle,byline:n.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(i),textContent:o,length:o.length,excerpt:n.excerpt,siteName:n.siteName||this._articleSiteName}}},e.exports=t},396:function(e,t,n){e.exports={Readability:n(238),isProbablyReaderable:n(804)}},44:function(e,t,n){"use strict";var i,r,o,a;n.r(t),n.d(t,{stringify:()=>T,SelectorType:()=>i,AttributeAction:()=>r,IgnoreCaseMode:()=>s,isTraversal:()=>d,parse:()=>v}),(o=i||(i={})).Attribute="attribute",o.Pseudo="pseudo",o.PseudoElement="pseudo-element",o.Tag="tag",o.Universal="universal",o.Adjacent="adjacent",o.Child="child",o.Descendant="descendant",o.Parent="parent",o.Sibling="sibling",o.ColumnCombinator="column-combinator";let s={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};(a=r||(r={})).Any="any",a.Element="element",a.End="end",a.Equals="equals",a.Exists="exists",a.Hyphen="hyphen",a.Not="not",a.Start="start";let l=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,c=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,u=new Map([[126,r.Element],[94,r.Start],[36,r.End],[42,r.Any],[33,r.Not],[124,r.Hyphen]]),h=new Set(["has","not","matches","is","where","host","host-context"]);function d(e){switch(e.type){case i.Adjacent:case i.Child:case i.Descendant:case i.Parent:case i.Sibling:case i.ColumnCombinator:return!0;default:return!1}}let f=new Set(["contains","icontains"]);function g(e,t,n){let i=parseInt(t,16)-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)}function m(e){return e.replace(c,g)}function p(e){return 39===e||34===e}function y(e){return 32===e||9===e||10===e||12===e||13===e}function v(e){let t=[],n=function e(t,n,o){let a=[];function s(e){let t=n.slice(o+e).match(l);if(!t)throw Error(`Expected name, found ${n.slice(o)}`);let[i]=t;return o+=e+i.length,m(i)}function c(e){for(o+=e;o<n.length&&y(n.charCodeAt(o));)o++}function g(){let e=o+=1,t=1;for(;t>0&&o<n.length;o++)40!==n.charCodeAt(o)||v(o)?41===n.charCodeAt(o)&&!v(o)&&t--:t++;if(t)throw Error("Parenthesis not matched");return m(n.slice(e,o-1))}function v(e){let t=0;for(;92===n.charCodeAt(--e);)t++;return(1&t)==1}function _(){if(a.length>0&&d(a[a.length-1]))throw Error("Did not expect successive traversals.")}function b(e){if(a.length>0&&a[a.length-1].type===i.Descendant){a[a.length-1].type=e;return}_(),a.push({type:e})}function E(e,t){a.push({type:i.Attribute,name:e,action:t,value:s(1),namespace:null,ignoreCase:"quirks"})}function N(){if(a.length&&a[a.length-1].type===i.Descendant&&a.pop(),0===a.length)throw Error("Empty sub-selector");t.push(a)}if(c(0),n.length===o)return o;e:for(;o<n.length;){let t=n.charCodeAt(o);switch(t){case 32:case 9:case 10:case 12:case 13:(0===a.length||a[0].type!==i.Descendant)&&(_(),a.push({type:i.Descendant})),c(1);break;case 62:b(i.Child),c(1);break;case 60:b(i.Parent),c(1);break;case 126:b(i.Sibling),c(1);break;case 43:b(i.Adjacent),c(1);break;case 46:E("class",r.Element);break;case 35:E("id",r.Equals);break;case 91:{let e;c(1);let t=null;124===n.charCodeAt(o)?e=s(1):n.startsWith("*|",o)?(t="*",e=s(2)):(e=s(0),124===n.charCodeAt(o)&&61!==n.charCodeAt(o+1)&&(t=e,e=s(1))),c(0);let l=r.Exists,h=u.get(n.charCodeAt(o));if(h){if(l=h,61!==n.charCodeAt(o+1))throw Error("Expected `=`");c(2)}else 61===n.charCodeAt(o)&&(l=r.Equals,c(1));let d="",f=null;if("exists"!==l){if(p(n.charCodeAt(o))){let e=n.charCodeAt(o),t=o+1;for(;t<n.length&&(n.charCodeAt(t)!==e||v(t));)t+=1;if(n.charCodeAt(t)!==e)throw Error("Attribute value didn't end");d=m(n.slice(o+1,t)),o=t+1}else{let e=o;for(;o<n.length&&(!y(n.charCodeAt(o))&&93!==n.charCodeAt(o)||v(o));)o+=1;d=m(n.slice(e,o))}c(0);let e=32|n.charCodeAt(o);115===e?(f=!1,c(1)):105===e&&(f=!0,c(1))}if(93!==n.charCodeAt(o))throw Error("Attribute selector didn't terminate");o+=1;let g={type:i.Attribute,name:e,action:l,value:d,namespace:t,ignoreCase:f};a.push(g);break}case 58:{if(58===n.charCodeAt(o+1)){a.push({type:i.PseudoElement,name:s(2).toLowerCase(),data:40===n.charCodeAt(o)?g():null});continue}let t=s(1).toLowerCase(),r=null;if(40===n.charCodeAt(o))if(h.has(t)){if(p(n.charCodeAt(o+1)))throw Error(`Pseudo-selector ${t} cannot be quoted`);if(o=e(r=[],n,o+1),41!==n.charCodeAt(o))throw Error(`Missing closing parenthesis in :${t} (${n})`);o+=1}else{if(r=g(),f.has(t)){let e=r.charCodeAt(0);e===r.charCodeAt(r.length-1)&&p(e)&&(r=r.slice(1,-1))}r=m(r)}a.push({type:i.Pseudo,name:t,data:r});break}case 44:N(),a=[],c(1);break;default:{let e;if(n.startsWith("/*",o)){let e=n.indexOf("*/",o+2);if(e<0)throw Error("Comment was not terminated");o=e+2,0===a.length&&c(0);break}let r=null;if(42===t)o+=1,e="*";else if(124===t){if(e="",124===n.charCodeAt(o+1)){b(i.ColumnCombinator),c(2);break}}else if(l.test(n.slice(o)))e=s(0);else break e;124===n.charCodeAt(o)&&124!==n.charCodeAt(o+1)&&(r=e,42===n.charCodeAt(o+1)?(e="*",o+=2):e=s(1)),a.push("*"===e?{type:i.Universal,namespace:r}:{type:i.Tag,name:e,namespace:r})}}}return N(),o}(t,`${e}`,0);if(n<e.length)throw Error(`Unmatched selector: ${e.slice(n)}`);return t}let _=["\\",'"',"%","'"],b=[..._,"(",")"],E=new Set(_.map(e=>e.charCodeAt(0))),N=new Set(b.map(e=>e.charCodeAt(0))),A=new Set([...b,"~","^","$","*","+","!","|",":","[","]"," ","."].map(e=>e.charCodeAt(0)));function T(e){return e.map(e=>e.map(C).join("")).join(", ")}function C(e,t,n){switch(e.type){case i.Child:return 0===t?"> ":" > ";case i.Parent:return 0===t?"< ":" < ";case i.Sibling:return 0===t?"~ ":" ~ ";case i.Adjacent:return 0===t?"+ ":" + ";case i.Descendant:return" ";case i.ColumnCombinator:return 0===t?"|| ":" || ";case i.Universal:return"*"===e.namespace&&t+1<n.length&&"name"in n[t+1]?"":`${x(e.namespace)}*`;case i.Tag:return S(e);case i.PseudoElement:return`::${w(e.name,A)}${null===e.data?"":`(${w(e.data,N)})`}`;case i.Pseudo:return`:${w(e.name,A)}${null===e.data?"":`(${"string"==typeof e.data?w(e.data,N):T(e.data)})`}`;case i.Attribute:{if("id"===e.name&&e.action===r.Equals&&"quirks"===e.ignoreCase&&!e.namespace)return`#${w(e.value,A)}`;if("class"===e.name&&e.action===r.Element&&"quirks"===e.ignoreCase&&!e.namespace)return`.${w(e.value,A)}`;let t=S(e);if(e.action===r.Exists)return`[${t}]`;return`[${t}${function(e){switch(e){case r.Equals:return"";case r.Element:return"~";case r.Start:return"^";case r.End:return"$";case r.Any:return"*";case r.Not:return"!";case r.Hyphen:return"|";case r.Exists:throw Error("Shouldn't be here")}}(e.action)}="${w(e.value,E)}"${null===e.ignoreCase?"":e.ignoreCase?" i":" s"}]`}}}function S(e){return`${x(e.namespace)}${w(e.name,A)}`}function x(e){return null!==e?`${"*"===e?"*":w(e,A)}|`:""}function w(e,t){let n=0,i="";for(let r=0;r<e.length;r++)t.has(e.charCodeAt(r))&&(i+=`${e.slice(n,r)}\\${e.charAt(r)}`,n=r+1);return i.length>0?i+e.slice(n):e}},900:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=function e(t,n){return i(this,void 0,void 0,function*(){var c,u,h,d,f,g;let{root:m,filter:p}=n;if(!m&&p&&!p(t))return null;let y=yield function(e,t){try{var n,i;if(e instanceof HTMLCanvasElement&&(null==t?void 0:t.images))return(0,r.createImage)(e.toDataURL(),null==t?void 0:t.fetchOptions);if(!(null==t?void 0:t.images)&&e instanceof HTMLImageElement||!(null==t?void 0:t.styles)&&(e instanceof HTMLButtonElement||e instanceof HTMLFormElement||e instanceof HTMLSelectElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e.nodeType===Node.COMMENT_NODE||(n=e)&&n.tagName&&s.includes(n.tagName.toLowerCase()))return null;if(e.nodeType!==Node.TEXT_NODE&&!l(e)){let{display:t,width:n,height:r}=window.getComputedStyle(e);if("none"===t||"0px"===n&&"0px"===r)return null;if((i=e)&&i.tagName&&!a.includes(i.tagName.toLowerCase())&&i.tagName.includes("-")){let n=t.includes("inline"),i=document.createElement(n?"span":"div");for(let t of e.attributes)i.setAttribute(t.name,t.value);return i}}return e.cloneNode(!1)}catch(e){return console.error("Failed to clone element",e),null}}(t,n);return y?(y=yield function(t,n,r){return i(this,void 0,void 0,function*(){let o=t.childNodes;return 0===o.length||(yield function(t,n,r){return i(this,void 0,void 0,function*(){for(let i of n){let n=yield e(i,Object.assign(Object.assign({},r),{root:!1}));n&&t.appendChild(n)}})}(n,o,r)),n})}(t,y,n),c=t,u=y,h=n,u instanceof Element&&(h.styles&&(function(e,t,n){var i,r;let{getElementStyles:o}=n,a=o&&o(e);if(!a)return;t.style.cssText=a.cssText,"body"===e.tagName.toLowerCase()&&(i=getComputedStyle(e),(r=t.style).font=i.font,r.fontFamily=i.fontFamily,r.fontFeatureSettings=i.fontFeatureSettings,r.fontKerning=i.fontKerning,r.fontSize=i.fontSize,r.fontStretch=i.fontStretch,r.fontStyle=i.fontStyle,r.fontVariant=i.fontVariant,r.fontVariantCaps=i.fontVariantCaps,r.fontVariantEastAsian=i.fontVariantEastAsian,r.fontVariantLigatures=i.fontVariantLigatures,r.fontVariantNumeric=i.fontVariantNumeric,r.fontVariationSettings=i.fontVariationSettings,r.fontWeight=i.fontWeight);let s=t.getAttribute("style");s&&t.setAttribute("style",s.replace(/(:?[:;])(:? +)/gm,(e,t)=>t))}(c,u,h),function(e,t,n){let{getPseudoElementStyles:i}=n,r=!1,a=document.createElement("style"),s=`pseudo--${(0,o.uid)()}`;for(let t of[":before",":after"]){let n=i&&i(e,t)||getComputedStyle(e,t);if(!n.cssText)continue;let o=`.${s}:${t} {
        ${n.cssText}
      }`;a.appendChild(document.createTextNode(o)),r=!0}r&&(t.className=s,t.appendChild(a))}(c,u,h)),function(e){let t=window.location.href;for(let n of["href","src"]){let i=e.getAttribute(n),r=(null==i?void 0:i.startsWith("http"))?void 0:i;if(r){let i=new URL(r,t).href;e.setAttribute(n,i)}}}(u),d=c,f=u,(d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement)&&f.setAttribute("value",d.value),(g=u)instanceof SVGElement&&(g.setAttribute("xmlns","http://www.w3.org/2000/svg"),["width","height"].forEach(function(e){let t=g.getAttribute(e);!t||g.style.getPropertyValue(e)||g.style.setProperty(e,t)}))),u):null})},t.isSVGElement=l;let r=n(113),o=n(132),a=["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"].map(e=>e.toLowerCase()),s=["script"].map(e=>e.toLowerCase());function l(e){return!!e&&!!e.tagName&&a.includes(e.tagName.toLowerCase())}},762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=function(e){var t,g;return t=function(e){for(;h();)switch(f(c)){case 0:r(function(e){for(;!f(i(u,l));)h();return d(e,l)}(l-1),e);break;case 2:var t;r(d(l-1,function e(t){for(;h();)switch(c){case t:return l;case 34:case 39:34!==t&&39!==t&&e(c);break;case 40:41===t&&e(t);break;case 92:h()}return l}(91===(t=c)?t+2:40===t?t+1:t)).trim(),e);break;default:r(n(c),e)}return e}((g=e,o=a=1,s=(u=g).length,l=0,[])),u="",t};let n=String.fromCharCode;function i(e,t){return 0|e.charCodeAt(t)}function r(e,t){return t.push(e),e}let o=1,a=1,s=0,l=0,c=0,u="";function h(){return c=l<s?i(u,l++):0,a++,10===c&&(a=1,o++),c}function d(e,t){return u.slice(e,t)}function f(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 42:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}},399:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.toJpeg=function(e,t){return t.raster=!0,f(e,t).then(function(e){return null==e?void 0:e.toDataURL("image/jpeg",t.quality||1)})},t.toBlob=function(e,t){return t.raster=!0,f(e,t).then(e=>e&&(0,l.canvasToBlob)(e))},t.toCanvas=function(e,t){return t.raster=!0,f(e,t)},t.toPixelData=function(e,t){return(t=t||{}).raster=!0,f(e,t).then(function(t){var n;return null==(n=null==t?void 0:t.getContext("2d"))?void 0:n.getImageData(0,0,(0,l.width)(e),(0,l.height)(e)).data})},t.toPng=function(e,t){return t.raster=!0,f(e,t).then(function(e){return null==e?void 0:e.toDataURL()})},t.toSvg=d,t.getInlinedNode=h;let r=n(900),o=n(113),a=n(536),s=n(307),l=n(132),c=n(707),u={inlineOptions:{}};function h(e,t){return i(this,void 0,void 0,function*(){let{fonts:n,images:i,stylesheets:o,inlineImages:l}=t.inlineOptions||{};o&&(yield(0,c.inlineStylesheets)(t.fetchOptions));let u=getComputedStyle(document.documentElement),h=o?yield(0,c.cacheStylesheets)(u):void 0,d=yield(0,r.cloneNode)(e,{styles:t.styles,filter:t.filter,root:!0,vector:!t.raster,fetchOptions:t.fetchOptions,getElementStyles:null==h?void 0:h.get,getPseudoElementStyles:null==h?void 0:h.getPseudo,images:i});if(!(!d||d instanceof Text)){var f,m;return n&&(d=yield(f=d,m=t.fetchOptions,(0,a.resolveAll)(m).then(function(e){let t=document.createElement("style");return f.appendChild(t),t.appendChild(document.createTextNode(e)),f}))),l&&(yield(0,s.inlineAllImages)(d,t.fetchOptions)),function(e){for(let t of e.querySelectorAll("*"))if(!(!(t instanceof HTMLElement)||(0,r.isSVGElement)(t))){for(let e of Array.from(t.attributes))!("class"===e.name&&t.className.includes("pseudo--"))&&(g.includes(e.name)||t.removeAttribute(e.name));t instanceof HTMLAnchorElement&&(t.href=t.href.startsWith("http")?t.href:document.location.origin+t.href)}}(d),d}})}function d(e,t){return i(this,void 0,void 0,function*(){t.inlineOptions=Object.assign({fonts:!0,images:!0,stylesheets:!0},t.inlineOptions);let n=yield h(e,t);if(n){var i,r,o,a,s;return o=(i=n,(r=t).backgroundColor&&(i.style.backgroundColor=r.backgroundColor),r.width&&(i.style.width=r.width+"px"),r.height&&(i.style.height=r.height+"px"),n=i),a=t.width||(0,l.width)(e),s=t.height||(0,l.height)(e),o.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),"data:image/svg+xml;charset=utf-8,"+('<svg xmlns="http://www.w3.org/2000/svg" width="'+a+'" height="'+s+'"><foreignObject x="0" y="0" width="100%" height="100%">'+(0,l.escapeXhtml)(new XMLSerializer().serializeToString(o)))+"</foreignObject></svg>"}})}function f(e,t){return d(e,t=Object.assign(Object.assign({},u),t)).then(e=>e?(0,o.createImage)(e,t.fetchOptions):null).then((0,l.delay)(0)).then(function(n){let i="number"!=typeof t.scale?1:t.scale,r=function(e,t,n){let i=document.createElement("canvas");if(i.width=(n.width||(0,l.width)(e))*t,i.height=(n.height||(0,l.height)(e))*t,n.backgroundColor){let e=i.getContext("2d");if(!e)return null;e.fillStyle=n.backgroundColor,e.fillRect(0,0,i.width,i.height)}return i}(e,i,t),o=null==r?void 0:r.getContext("2d");return o?(o.imageSmoothingEnabled=!1,n&&(o.scale(i,i),o.drawImage(n,0,0)),r):null})}let g=["src","href","title","style","srcset","sizes","width","height","target","rel"]},113:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};function i(e,t){if(!e.startsWith("http"))return e;if((null==t?void 0:t.noCache)&&(e+=(/\?/.test(e)?"&":"?")+Date.now()),(null==t?void 0:t.bypassCors)&&(null==t?void 0:t.corsHost)){if(e.startsWith(t.corsHost))return e;e=`${t.corsHost}/${e}`}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchResource=function(e,t){return n(this,void 0,void 0,function*(){if(!e)return null;let n=yield fetch(i(e,t));if(!n.ok)return"";let r=yield n.blob(),o=new FileReader;return o.readAsDataURL(r),new Promise(e=>{o.addEventListener("loadend",()=>{"string"==typeof o.result&&e(o.result)})})})},t.createImage=function(e,t){return"data:,"===e?Promise.resolve(null):new Promise(function(n,r){let o=new Image;o.crossOrigin=(null==t?void 0:t.crossOrigin)||null,o.onload=function(){n(o)},o.onerror=r,o.src=i(e,t)})},t.reloadImage=function(e,t){return t.corsHost&&e.currentSrc.startsWith(t.corsHost)?Promise.resolve(null):(t.noCache=!0,new Promise(function(n,r){e.crossOrigin=t.crossOrigin||null,e.onload=function(){n(e)},e.onerror=t=>{console.error("Failed to load image",e.currentSrc),r(t)},e.src=i(e.currentSrc,t)}))},t.constructUrl=i},536:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveAll=function(e){return i(this,void 0,void 0,function*(){let t=a(function(e){let t=[];for(let n of e)try{let e=a(Array.from(n.cssRules));e.length>3&&t.push(e[0])}catch(e){e instanceof Error&&console.log("Error while reading CSS rules from "+n.href,e.toString())}return t}(document.styleSheets)).map(o),n=[];for(let i of t)n.push((yield i.resolve(e)));return n.join("\n")})};let r=n(812);function o(e){return{resolve:function(t){let n=(e.parentStyleSheet||{}).href||void 0;return(0,r.inlineAll)(e.cssText,t,n)},src:function(){return e.style.getPropertyValue("src")}}}function a(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return(0,r.shouldProcess)(e.style.getPropertyValue("src"))})}},307:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.inlineAllImages=function(e,t){return i(this,void 0,void 0,function*(){let n=e.querySelectorAll("img"),s=[];for(let e=0;e<n.length;++e){let o=n[e];s.push(function(e,t){return i(this,void 0,void 0,function*(){if((0,a.isDataUrl)(e.currentSrc))return Promise.resolve(null);let n=yield(0,r.fetchResource)(e.currentSrc||e.src,t);return n?"data:,"===n?(e.removeAttribute("src"),e):new Promise(function(t,i){var r,o;(null==(r=e.parentElement)?void 0:r.tagName)==="PICTURE"&&(null==(o=e.parentElement)||o.replaceWith(e)),e.onload=()=>t(e),e.onerror=e=>i(e),e.src=n,e.removeAttribute("srcset")}):null})}(o,t))}let l=e.querySelectorAll('[style*="background-image:"],[style*="background:"]');for(let e=0;e<l.length;++e){let n=l[e];s.push(function(e,t){return i(this,void 0,void 0,function*(){let n=e.style.getPropertyValue("background-image");if(!n)return e;let i=yield(0,o.inlineAll)(n,t);return e.style.setProperty("background-image",i),e})}(n,t))}yield Promise.all(s).catch(e=>console.error(e))})};let r=n(113),o=n(812),a=n(132)},769:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.clipPage=function(e,t,n){return i(this,void 0,void 0,function*(){let{body:i,head:r}=yield _(e,n,t);if(!i||!r)return null;let o=y(r,i).documentElement.outerHTML;return`<!doctype html>
${o}`})},t.clipArticle=function(e,t){return i(this,void 0,void 0,function*(){let{body:n,head:i}=yield _(e,t);if(!n||!i)return null;let o=y(i,n),a=new r.Readability(o);a.PRESENTATIONAL_ATTRIBUTES=["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","valign","vspace"];let s=a.parse();return`<!DOCTYPE html><html>${(null==i?void 0:i.outerHTML)||""}<body>${(null==s?void 0:s.content)||""}</body></html>`})},t.cleanup=v,t.clipScreenshot=function(e){return i(this,arguments,void 0,function*(e,t="jpeg",n){let i=e||document.body,r="jpeg"===t?s.toJpeg:"png"===t?s.toPng:s.toBlob,o=yield r(i,{quality:1,backgroundColor:"white",width:document.body.scrollWidth,height:document.body.scrollHeight,fetchOptions:b(n),inlineOptions:{fonts:!0,images:!0,stylesheets:!0},styles:!0});return"jpeg"===t||"png"===t?`<img width="${document.body.scrollWidth}px" height="${document.body.scrollHeight}px" src="${o}" />`:o})},t.enterNodeSelectionMode=function(e,t){let n;return setTimeout(()=>{e.body.addEventListener("click",p),e.body.addEventListener("mouseout",m),e.body.addEventListener("mouseover",g)},0),n=`.${l} {
    border: 1px solid green;
    background-color: rgb(0,0,0,0.05);
    cursor: pointer;
  }

  .${c} {
    border: 2px solid green;
    cursor: pointer;
  }

  .${u} {
    position: fixed;
    bottom: 0px;
    right: 0px;
    z-index: ${Number.MAX_VALUE};
  }`,(0,o.injectCss)(n,"nn-clipper-styles"),new Promise((e,n)=>{var r,o;let l;r=()=>i(this,void 0,void 0,function*(){v();let n=document.querySelectorAll(`.${c}`),i=document.createElement("div");for(let e of n){e.classList.remove(c);let n=yield(0,s.getInlinedNode)(e,{raster:!1,fetchOptions:b(t),inlineOptions:Object.assign(Object.assign({},d),{images:null==t?void 0:t.images,inlineImages:null==t?void 0:t.inlineImages})});n&&i.appendChild(n)}e(null==i?void 0:i.outerHTML)}),o=()=>n("Cancelled."),(l=document.createElement("div")).classList.add(u),setTimeout(()=>{document.body.appendChild(l)},0),(0,a.app)({init:{isClipping:!1},view:({isClipping:e})=>(0,a.h)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"5px",boxShadow:"0px 0px 10px 0px #00000038"}},[(0,a.h)("p",{style:{marginBottom:"0px",fontSize:"18px"}},[(0,a.text)("Notesnook Web Clipper")]),(0,a.h)("p",{style:{margin:"0px",marginBottom:"5px",fontStyle:"italic"}},[e?(0,a.text)("Clipping selected elements. Please wait..."):(0,a.text)("Click on any element to select it.")]),(0,a.h)("div",{style:{display:"flex",alignItems:"center"}},[(0,a.h)("button",{onclick:e=>[Object.assign(Object.assign({},e),{isClipping:!0}),e=>{null==r||r(),e({isClipping:!1})}],style:{marginRight:"5px"},disabled:e},[e?(0,a.text)("Clipping..."):(0,a.text)("Clip")]),(0,a.h)("button",{onclick:e=>(v(),null==o||o(),e),disabled:e},[(0,a.text)("Cancel")])])]),node:l})})};let r=n(396),o=n(132),a=n(673),s=n(399),l="nn-node-selection--hover",c="nn-node-selection--selected",u="nn-node-selection-container",h=[c,u],d={fonts:!1,images:!1,stylesheets:!0};function f(e){for(let t of h)if(e.classList.contains(t)||e.closest(`.${t}`))return!1;return!0}let g=e=>{let t=e.target;!t.classList.contains(l)&&f(t)&&t.classList.add(l)},m=e=>{let t=e.target;t.classList.contains(l)&&t.classList.remove(l)},p=e=>{e.preventDefault();let t=e.target;t.classList.contains(c)?t.classList.remove(c):f(t)&&t.classList.add(c)};function y(e,t){let n=document.implementation.createHTMLDocument();return n.documentElement.replaceChildren(e,t),n}function v(){setTimeout(()=>{var e;document.querySelectorAll(`.${c}`).forEach(e=>{e instanceof HTMLElement&&e.classList.remove(c)}),document.querySelectorAll(`.${u}`).forEach(e=>e.remove()),(e=document).body.removeEventListener("mouseout",m),e.body.removeEventListener("mouseover",g),document.body.removeEventListener("click",p)},0)}function _(e,t){return i(this,arguments,void 0,function*(e,t,n=!1){let i=yield(0,s.getInlinedNode)(e.body,{raster:!0,fetchOptions:b(t),inlineOptions:{fonts:!1,inlineImages:null==t?void 0:t.inlineImages,images:null==t?void 0:t.images,stylesheets:null==t?void 0:t.styles},styles:null==t?void 0:t.styles,filter:e=>{var t;let i,r,o,a,s,l,c,u,h,d,f,g,m,p,y,v;return!n||(((t=e).nodeType===Node.TEXT_NODE||!t.getBoundingClientRect)&&t.parentElement&&(t=t.parentElement),(i={isInViewport:!1,isPartiallyInViewport:!1,isInsideViewport:!1,isAroundViewport:!1,isOnEdge:!1,isOnTopEdge:!1,isOnRightEdge:!1,isOnBottomEdge:!1,isOnLeftEdge:!1},r=t.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth,s=r.left>=0&&r.left+r.width<=a,l=r.top>=0&&r.top+r.height<=o,i.isInsideViewport=s&&l,c=r.left<0&&r.left+r.width>a,u=r.top<0&&r.top+r.height>o,i.isAroundViewport=c&&u,h=r.top<0&&r.top+r.height>0,d=r.left<a&&r.left+r.width>a,f=r.left<0&&r.left+r.width>0,g=r.top<o&&r.top+r.height>o,m=l||u||h||g,p=s||c||f||d,i.isOnTopEdge=h&&p,i.isOnRightEdge=d&&m,i.isOnBottomEdge=g&&p,i.isOnLeftEdge=f&&m,i.isOnEdge=i.isOnLeftEdge||i.isOnRightEdge||i.isOnTopEdge||i.isOnBottomEdge,y=s||c||i.isOnLeftEdge||i.isOnRightEdge,v=l||u||i.isOnTopEdge||i.isOnBottomEdge,i.isInViewport=y&&v,i.isPartiallyInViewport=i.isInViewport&&i.isOnEdge,i).isInViewport)}});if(!i)return{};let r=e.createElement("head"),o=e.createElement("title");return o.innerText=e.title,r.appendChild(o),{body:i,head:r}})}function b(e){return(null==e?void 0:e.corsProxy)?{bypassCors:!0,corsHost:e.corsProxy,crossOrigin:"anonymous",noCache:!0}:void 0}},812:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.shouldProcess=s,t.inlineAll=function(e,t,n){return i(this,void 0,void 0,function*(){if(!s(e))return e;let a=l(e),c=e;for(let e of a)c=yield function(e,t,n,a){return i(this,void 0,void 0,function*(){var i;t=a?(0,o.resolveUrl)(t,a):t;let s=yield(0,r.fetchResource)(t,n);return e.replace((i=t,RegExp("(url\\(['\"]?)("+(0,o.escape)(i)+")(['\"]?\\))","g")),"$1"+s+"$3")})}(c,e,t,n);return c})},t.readUrls=l;let r=n(113),o=n(132),a=/url\(['"]?([^'"]+?)['"]?\)/g;function s(e){return -1!==e.search(a)}function l(e){let t,n=[];for(;null!==(t=a.exec(e));)n.push(t[1]);return n.filter(function(e){return!(0,o.isDataUrl)(e)})}},707:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.inlineStylesheets=function(e){return i(this,void 0,void 0,function*(){for(let t of document.styleSheets)if(yield d(t,e))continue;yield function(e){return i(this,void 0,void 0,function*(){for(let t of document.styleSheets){let n=[];if(!(yield d(t,e))){for(let i=0;i<t.cssRules.length;++i){let r=t.cssRules.item(i);if(r&&r.type===CSSRule.IMPORT_RULE){let o=r.href,a=yield u(o,e);a&&(t.ownerNode?t.ownerNode.before(a):document.head.appendChild(a),n.push(i))}}for(let e of n)t.deleteRule(e)}}})}(e)})},t.cacheStylesheets=function(e){return i(this,void 0,void 0,function*(){let t=new Map,n=new Map;for(let i of document.styleSheets){if(yield d(i))continue;let r=i.href||void 0;!r&&i.ownerNode instanceof HTMLElement&&(r=i.ownerNode.getAttribute("href")||void 0),function e(t,n,i,r,a){for(let u of t)if(u instanceof CSSStyleRule){var c;if((c=u.selectorText).includes(":before")||c.includes(":after")||c.includes("::after")||c.includes("::before")){for(let e of function(e){let t=[];for(let n of(0,s.parse)(e)){let e=n.findIndex(e=>(e.type===s.SelectorType.Pseudo||e.type===s.SelectorType.PseudoElement)&&("after"===e.name||"before"===e.name));e<=-1||t.push({selector:(0,s.stringify)([n.slice(0,e)]),pseudoElement:(0,s.stringify)([n.slice(e)])})}return t}(u.selectorText))if(e&&e.selector.trim())for(let t of(0,l.safeQuerySelectorAll)(document,e.selector)){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))continue;let n=r.get(t)||[];r.set(t,n),n.push({rule:u.style,href:f(a),pseudoElement:e.pseudoElement})}}for(let e of(0,l.safeQuerySelectorAll)(document,u.selectorText)){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))continue;let t=u.selectorText.split(","),n=i.get(e)||[];for(let r of(i.set(e,n),t))try{let e=(0,o.calculate)(r)[0];n.push({specificity:e.specificityArray,rule:u.style,href:f(a)});break}catch(e){console.error(e,a&&f(a))}}}else u instanceof CSSMediaRule&&window.matchMedia(u.conditionText).matches?e(u.cssRules,n,i,r,a):u instanceof CSSSupportsRule&&CSS.supports(u.conditionText)&&e(u.cssRules,n,i,r,a)}(i.cssRules,e,t,n,r)}return{getPseudo(t,i){var r;let o=null==(r=n.get(t))?void 0:r.filter(e=>e.pseudoElement.includes(i));if(o&&o.length)return h(t,o,e)},get(n){let i=t.get(n);if(!i)return;let r=i.sort((e,t)=>(0,o.compare)(e.specificity,t.specificity));return r.push({rule:n.style,specificity:[0,0,0,0],href:null}),h(n,r,e)}}})};let r=n(113),o=n(48),a=n(762),s=n(44),l=n(132),c=["animation","background","border","border-block-end","border-block-start","border-bottom","border-color","border-image","border-inline-end","border-inline-start","border-left","border-radius","border-right","border-style","border-top","border-width","column-rule","columns","contain-intrinsic-size","flex","flex-flow","font","gap","grid","grid-area","grid-column","grid-row","grid-template","grid-gap","list-style","margin","mask","offset","outline","overflow","padding","place-content","place-items","place-self","scroll-margin","scroll-padding","text-decoration","text-emphasis","transition"];function u(e,t){return i(this,void 0,void 0,function*(){try{let n=document.createElement("style"),i=yield fetch((0,r.constructUrl)(e,t));if(!i.ok)return!1;return n.innerText=yield i.text(),n.setAttribute("href",e),n}catch(t){console.error("Failed to inline stylesheet",e,t)}})}function h(e,t,n){var i,r,o,s,l,u,h;let d,f,g=((d=new CSSStyleSheet).insertRule(".dummy{}"),d.cssRules[0].style),m=(i=e,Object.defineProperty({},"style",{get:()=>(f||(f=getComputedStyle(i)),f)})),p=["display"];for(let e of t)for(let t of[...e.rule,...c]){let i=e.rule.getPropertyValue(t);p.includes(t)&&(i=m.style.getPropertyValue(t)),i.trim()&&(r=g,o=t,s=i,l=e=>m.style.getPropertyValue(e)||n.getPropertyValue(e),u=t=>(console.log("resolving url",t,e.href),t.startsWith("data:")||!e.href)?t:(console.log("resolving url",t,e.href.href),t.startsWith("/"))?new URL(`${e.href.origin}${t}`).href:new URL(`${e.href.href}${t}`).href,h=e.rule.getPropertyPriority(t),s=function(e,t){let n=(0,a.tokenize)(e),i=[];for(let e=0;e<n.length;++e){let r=n[e];if("url"!==r||n[e+1].startsWith("(data"))i.push(r);else{let o=t(n[++e].slice(2,-2));o&&(i.push(r),i.push('("'),i.push(o),i.push('")'))}}return i.join("")}(s=function e(t,n){let i=(0,a.tokenize)(t),r=[];for(let t=0;t<i.length;++t){let o=i[t];if("var"===o){let[o,s,l,...c]=(0,a.tokenize)(i[++t].slice(1,-1)),u=n(o);u?r.push(u):s&&c.length<=1?r.push(c[0]||l):s&&2===c.length&&r.push(e(c.join(""),n))}else o.startsWith("(")&&o.endsWith(")")?r.push("(",e(o.slice(1,-1),n),")"):r.push(o)}return r.join("")}(s,l),u),r.setProperty(o,s,h))}return g}function d(e,t){return i(this,void 0,void 0,function*(){try{e.cssRules.length}catch(i){let n=e.ownerNode;if(e.href&&n instanceof HTMLLinkElement){let e=yield u(n.href,t);e&&n.replaceWith(e)}return!0}return e.media.mediaText.split(",").map(e=>e.trim()).includes("print")})}function f(e){if(!e)return null;e.startsWith("/")&&(e=`${document.location.origin}${e}`);let t=new URL(e),n=t.pathname.split("/").slice(0,-1).join("/");return new URL(`${t.origin}${n}/`)}},132:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectCss=function(e,t){let n=document.getElementById(t),i=document.getElementsByTagName("head")[0];n&&i.removeChild(n);let r=document.createElement("style");r.type="text/css",r.id=t,r.appendChild(document.createTextNode(e)),i.insertBefore(r,function(){for(let e of document.querySelectorAll("style"))if(e.innerHTML.includes("#root"))return e;return null}())},t.escape=function(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")},t.parseExtension=o,t.mimeType=function(e){return r[o(e).toLowerCase()]||""},t.dataAsUrl=function(e,t){return"data:"+t+";base64,"+e},t.isDataUrl=function(e){return -1!==e.search(/^(data:)/)},t.canvasToBlob=function(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):Promise.resolve(function(e){let t=atob(e.toDataURL().split(",")[1]),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return new Blob([i],{type:"image/png"})}(e))},t.resolveUrl=function(e,t){let n=document.implementation.createHTMLDocument(),i=n.createElement("base");n.head.appendChild(i);let r=n.createElement("a");return n.body.appendChild(r),i.href=t,r.href=e,r.href},t.uid=function(){return"u"+("0000"+(1679616*Math.random()|0).toString(36)).slice(-4)+a++},t.delay=function(e){return function(t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}},t.asArray=function(e){let t=[],n=e.length;for(let i=0;i<n;i++)t.push(e[i]);return t},t.escapeXhtml=function(e){return e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},t.width=function(e){let t=s(e,"border-left-width"),n=s(e,"border-right-width");return e.scrollWidth+t+n},t.height=function(e){let t=s(e,"border-top-width"),n=s(e,"border-bottom-width");return e.scrollHeight+t+n},t.safeQuerySelectorAll=function(e,t){try{return e.querySelectorAll(t)}catch(e){return new NodeList}};let n="application/font-woff",i="image/jpeg",r={woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:i,jpeg:i,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function o(e){let t=/\.([^./]*?)(\?|$)/g.exec(e);return t?t[1]:""}let a=0;function s(e,t){return parseFloat(getComputedStyle(e).getPropertyValue(t).replace("px",""))}},673:function(e,t,n){"use strict";n.r(t),n.d(t,{app:()=>E,h:()=>b,memo:()=>v,text:()=>_});var i={},r=[],o=e=>e,a=r.map,s=Array.isArray,l="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,c=e=>{var t="";if("string"==typeof e)return e;if(s(e))for(var n,i=0;i<e.length;i++)(n=c(e[i]))&&(t+=(t&&" ")+n);else for(var i in e)e[i]&&(t+=(t&&" ")+i);return t},u=(e,t)=>{for(var n in{...e,...t})if("function"==typeof(s(e[n])?e[n][0]:e[n]))t[n]=e[n];else if(e[n]!==t[n])return!0},h=e=>null==e?e:e.key,d=(e,t,n,i,r,o)=>{if("style"===t)for(var a in{...n,...i})n=null==i||null==i[a]?"":i[a],"-"===a[0]?e[t].setProperty(a,n):e[t][a]=n;else"o"===t[0]&&"n"===t[1]?((e.events||(e.events={}))[t=t.slice(2)]=i)?n||e.addEventListener(t,r):e.removeEventListener(t,r):!o&&"list"!==t&&"form"!==t&&t in e?e[t]=null==i?"":i:null==i||!1===i?e.removeAttribute(t):e.setAttribute(t,i)},f=(e,t,n)=>{var i=e.props,r=3===e.type?document.createTextNode(e.tag):(n=n||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag,i.is&&i):document.createElement(e.tag,i.is&&i);for(var o in i)d(r,o,null,i[o],t,n);for(var a=0;a<e.children.length;a++)r.appendChild(f(e.children[a]=m(e.children[a]),t,n));return e.node=r},g=(e,t,n,i,r,o)=>{if(n===i);else if(null!=n&&3===n.type&&3===i.type)n.tag!==i.tag&&(t.nodeValue=i.tag);else if(null==n||n.tag!==i.tag)t=e.insertBefore(f(i=m(i),r,o),t),null!=n&&e.removeChild(n.node);else{var a,s,l,c,u=n.props,p=i.props,y=n.children,v=i.children,_=0,b=0,E=y.length-1,N=v.length-1;for(var A in o=o||"svg"===i.tag,{...u,...p})("value"===A||"selected"===A||"checked"===A?t[A]:u[A])!==p[A]&&d(t,A,u[A],p[A],r,o);for(;b<=N&&_<=E&&null!=(l=h(y[_]))&&l===h(v[b]);)g(t,y[_].node,y[_],v[b]=m(v[b++],y[_++]),r,o);for(;b<=N&&_<=E&&null!=(l=h(y[E]))&&l===h(v[N]);)g(t,y[E].node,y[E],v[N]=m(v[N--],y[E--]),r,o);if(_>E)for(;b<=N;)t.insertBefore(f(v[b]=m(v[b++]),r,o),(s=y[_])&&s.node);else if(b>N)for(;_<=E;)t.removeChild(y[_++].node);else{for(var T={},C={},A=_;A<=E;A++)null!=(l=y[A].key)&&(T[l]=y[A]);for(;b<=N;){if(l=h(s=y[_]),c=h(v[b]=m(v[b],s)),C[l]||null!=c&&c===h(y[_+1])){null==l&&t.removeChild(s.node),_++;continue}null==c||1===n.type?(null==l&&(g(t,s&&s.node,s,v[b],r,o),b++),_++):(l===c?(g(t,s.node,s,v[b],r,o),C[c]=!0,_++):null!=(a=T[c])?(g(t,t.insertBefore(a.node,s&&s.node),a,v[b],r,o),C[c]=!0):g(t,s&&s.node,null,v[b],r,o),b++)}for(;_<=E;)null==h(s=y[_++])&&t.removeChild(s.node);for(var A in T)null==C[A]&&t.removeChild(T[A].node)}}return i.node=t},m=(e,t)=>!0!==e&&!1!==e&&e?"function"==typeof e.tag?((!t||null==t.memo||((e,t)=>{for(var n in e)if(e[n]!==t[n])return!0;for(var n in t)if(e[n]!==t[n])return!0})(t.memo,e.memo))&&((t=e.tag(e.memo)).memo=e.memo),t):e:_(""),p=e=>3===e.nodeType?_(e.nodeValue,e):y(e.nodeName.toLowerCase(),i,a.call(e.childNodes,p),1,e),y=(e,{key:t,...n},i,r,o)=>({tag:e,props:n,key:t,children:i,type:r,node:o}),v=(e,t)=>({tag:e,memo:t}),_=(e,t)=>y(e,i,r,3,t),b=(e,{class:t,...n},o=r)=>y(e,{...n,...t?{class:c(t)}:i},s(o)?o:[o]),E=({node:e,view:t,subscriptions:n,dispatch:a=o,init:c=i})=>{var h,d,f=e&&p(e),m=[],y=e=>{h!==e&&(null==(h=e)&&(a=n=v=o),n&&(m=((e,t=r,n)=>{for(var i,o,a=[],s=0;s<e.length||s<t.length;s++)i=e[s],a.push((o=t[s])&&!0!==o?!i||o[0]!==i[0]||u(o[1],i[1])?[o[0],o[1],(i&&i[2](),o[0](n,o[1]))]:i:i&&i[2]());return a})(m,n(h),a)),t&&!d&&l(v,d=!0))},v=()=>e=g(e.parentNode,e,f,f=t(h),_,d=!1),_=function(e){a(this.events[e.type],e)};return(a=a((e,t)=>"function"==typeof e?a(e(h,t)):s(e)?"function"==typeof e[0]?a(e[0],e[1]):e.slice(1).map(e=>e&&!0!==e&&(e[0]||e)(a,e[1]),y(e[0])):y(e)))(c),a}},48:function(e,t,n){"use strict";n.r(t),n.d(t,{calculate:()=>i,compare:()=>o});var i=function(e){var t,n,i,o,a=[];for(i=0,o=(t=e.split(",")).length;i<o;i+=1)(n=t[i]).length>0&&a.push(r(n));return a},r=function(e){var t,n,i=e,r={a:0,b:0,c:0},o=[];return n=function(t,n){var a,s,l,c,u,h;if(t.test(i))for(s=0,l=(a=i.match(t)).length;s<l;s+=1)r[n]+=1,c=a[s],u=i.indexOf(c),h=c.length,o.push({selector:e.substr(u,h),type:n,index:u,length:h}),i=i.replace(c,Array(h+1).join(" "))},(t=function(e){var t,n,r,o;if(e.test(i))for(n=0,r=(t=i.match(e)).length;n<r;n+=1)o=t[n],i=i.replace(o,Array(o.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),t(/\\[0-9A-Fa-f]{1,5}\s/g),t(/\\./g),!function(){var e,t,n,r,o=/{[^]*/gm;if(o.test(i))for(t=0,n=(e=i.match(o)).length;t<n;t+=1)r=e[t],i=i.replace(r,Array(r.length+1).join(" "))}(),n(/(\[[^\]]+\])/g,"b"),n(/(#[^\#\s\+>~\.\[:\)]+)/g,"a"),n(/(\.[^\s\+>~\.\[:\)]+)/g,"b"),n(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),n(/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,"b"),n(/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,"b"),i=(i=(i=(i=(i=(i=i.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).replace(/:not/g,"    ")).replace(/:local/g,"      ")).replace(/:global/g,"       ")).replace(/[\(\)]/g," "),n(/([^\s\+>~\.\[:]+)/g,"c"),o.sort(function(e,t){return e.index-t.index}),{selector:e,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:o}},o=function(e,t){var n,i,o;if("string"==typeof e)if(-1!==e.indexOf(","))throw"Invalid CSS selector";else n=r(e).specificityArray;else if(Array.isArray(e))if(4!==e.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";else n=e;else throw"Invalid CSS selector or specificity array";if("string"==typeof t)if(-1!==t.indexOf(","))throw"Invalid CSS selector";else i=r(t).specificityArray;else if(Array.isArray(t))if(4!==t.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";else i=t;else throw"Invalid CSS selector or specificity array";for(o=0;o<4;o+=1)if(n[o]<i[o])return -1;else if(n[o]>i[o])return 1;return 0}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let e=n(769);global.Clipper={clipArticle:e.clipArticle,clipPage:e.clipPage}})(),module.exports=i})();